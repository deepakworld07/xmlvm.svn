#import "org_xmlvm_iphone_CGRect.h"
#import "org_xmlvm_iphone_NSTimer.h"
#import "org_xmlvm_iphone_gl_GL.h"
#import "java_lang_Object.h"
#import "org_xmlvm_iphone_gl_CAEAGLLayer.h"
#import "org_xmlvm_iphone_gl_EAGLDrawable.h"
#import "java_lang_StringBuilder.h"
#import "java_lang_String.h"
#import "java_io_PrintStream.h"
#import "java_lang_System.h"
#import "org_xmlvm_iphone_gl_EAGLContext.h"
#import "java_lang_RuntimeException.h"
#import "org_xmlvm_iphone_CGSize.h"

// Automatically generated by xmlvm2obj. Do not edit!


#import "org_xmlvm_iphone_demo_gl_nehelesson4_GLView.h"


@implementation org_xmlvm_iphone_demo_gl_nehelesson4_GLView;

+ (void) initialize
{
    if (strcmp(class_getName(self), "org_xmlvm_iphone_demo_gl_nehelesson4_GLView") == 0) {
    }
}

- (id) init
{
    if (self = [super init]) {
        context_org_xmlvm_iphone_gl_EAGLContext = (id) [NSNull null];
        animationTimer_org_xmlvm_iphone_NSTimer = (id) [NSNull null];
    }
    return self;
}

- (void) dealloc
{
    [context_org_xmlvm_iphone_gl_EAGLContext release];
    [animationTimer_org_xmlvm_iphone_NSTimer release];
    [super dealloc];
}

- (void) __init_org_xmlvm_iphone_demo_gl_nehelesson4_GLView___org_xmlvm_iphone_CGRect :(org_xmlvm_iphone_CGRect*)n1
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    XMLVMElem _r4;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r3.o = self;
    _r4.o = n1;
    [((org_xmlvm_iphone_UIViewGL*) _r3.o) __init_org_xmlvm_iphone_UIViewGL___org_xmlvm_iphone_CGRect:_r4.o];
    _r1.o = [[((org_xmlvm_iphone_CGRect*) _r4.o)->size_org_xmlvm_iphone_CGSize retain] autorelease];
    _r1.f = ((org_xmlvm_iphone_CGSize*) _r1.o)->width_float;
    _r1.i = (int) _r1.f;
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->backingWidth_int = _r1.i;
    _r1.o = [[((org_xmlvm_iphone_CGRect*) _r4.o)->size_org_xmlvm_iphone_CGSize retain] autorelease];
    _r1.f = ((org_xmlvm_iphone_CGSize*) _r1.o)->height_float;
    _r1.i = (int) _r1.f;
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->backingHeight_int = _r1.i;
    _r0.o = [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o) getEAGLLayer__];
    [_r0.o autorelease];
    _r1.o = [[[org_xmlvm_iphone_gl_EAGLContext alloc] init] autorelease];
    _r2.i = 1;
    [((org_xmlvm_iphone_gl_EAGLContext*) _r1.o) __init_org_xmlvm_iphone_gl_EAGLContext___int:_r2.i];
    [_r1.o retain];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->context_org_xmlvm_iphone_gl_EAGLContext release];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->context_org_xmlvm_iphone_gl_EAGLContext = _r1.o;
    _r1.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->context_org_xmlvm_iphone_gl_EAGLContext retain] autorelease];
    [org_xmlvm_iphone_gl_EAGLContext setCurrentContext___org_xmlvm_iphone_gl_EAGLContext:_r1.o];
    _r1.i = [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o) createFrameBuffer__];
    if (_r1.i != 0) goto label48;
    _r1.o = [[[java_lang_RuntimeException alloc] init] autorelease];
    _r2.o = @"Failed to create frame buffer";
    [((java_lang_RuntimeException*) _r1.o) __init_java_lang_RuntimeException___java_lang_String:_r2.o];
    @throw _r1.o;
    label48:;
    _r1.d = 0.022222222222222223;
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->animationInterval_double = _r1.d;
    _r1.i = 0;
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->isViewSetup_boolean = _r1.i;
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o) startAnimation__];
    [_pool release];
    return;
}


- (void) layoutSubviews__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r1.o = self;
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->context_org_xmlvm_iphone_gl_EAGLContext retain] autorelease];
    [org_xmlvm_iphone_gl_EAGLContext setCurrentContext___org_xmlvm_iphone_gl_EAGLContext:_r0.o];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o) destroyFrameBuffer__];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o) createFrameBuffer__];
    _r0.o = [NSNull null];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o) drawView___org_xmlvm_iphone_NSTimer:_r0.o];
    [_pool release];
    return;
}


- (int) createFrameBuffer__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    XMLVMElem _r4;
    XMLVMElem _r5;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r5.o = self;
    _r4.i = 36161;
    _r2.i = 1;
    _r3.i = 36160;
    _r0.i = [org_xmlvm_iphone_gl_GL glGenRenderbuffersOES___int:_r2.i];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o)->viewRenderbuffer_int = _r0.i;
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o)->viewRenderbuffer_int;
    [org_xmlvm_iphone_gl_GL glBindRenderbufferOES___int_int:_r4.i:_r0.i];
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o)->context_org_xmlvm_iphone_gl_EAGLContext retain] autorelease];
    _r1.o = [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o) getEAGLLayer__];
    [_r1.o autorelease];
    _r1.o = [((org_xmlvm_iphone_gl_CAEAGLLayer*) _r1.o) getDrawable__];
    [_r1.o autorelease];
    [((org_xmlvm_iphone_gl_EAGLContext*) _r0.o) renderBufferStorage___int_org_xmlvm_iphone_gl_EAGLDrawable:_r4.i:_r1.o];
    _r0.i = [org_xmlvm_iphone_gl_GL glGenFramebuffersOES___int:_r2.i];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o)->viewFramebuffer_int = _r0.i;
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o)->viewFramebuffer_int;
    [org_xmlvm_iphone_gl_GL glBindFramebufferOES___int_int:_r3.i:_r0.i];
    _r0.i = 36064;
    _r1.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r5.o)->viewRenderbuffer_int;
    [org_xmlvm_iphone_gl_GL glFramebufferRenderbufferOES___int_int_int_int:_r3.i:_r0.i:_r4.i:_r1.i];
    _r0.i = [org_xmlvm_iphone_gl_GL glCheckFramebufferStatusOES___int:_r3.i];
    _r1.i = 36053;
    if (_r0.i == _r1.i) goto label89;
    _r0.o = [java_lang_System _GET_out];
    _r1.o = [[[java_lang_StringBuilder alloc] init] autorelease];
    [((java_lang_StringBuilder*) _r1.o) __init_java_lang_StringBuilder__];
    _r2.o = @"failed to make complete framebuffer object ";
    _r1.o = [((java_lang_StringBuilder*) _r1.o) append___java_lang_String:_r2.o];
    [_r1.o autorelease];
    _r2.i = [org_xmlvm_iphone_gl_GL glCheckFramebufferStatusOES___int:_r3.i];
    _r1.o = [((java_lang_StringBuilder*) _r1.o) append___int:_r2.i];
    [_r1.o autorelease];
    _r1.o = [((java_lang_StringBuilder*) _r1.o) toString__];
    [_r1.o autorelease];
    [((java_io_PrintStream*) _r0.o) println___java_lang_String:_r1.o];
    _r0.i = 0;
    label88:;
    [_pool release];
    return _r0.i;
    label89:;
    _r0 = _r2;
    goto label88;
}


- (void) destroyFrameBuffer__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r3.o = self;
    _r2.i = 1;
    _r1.i = 0;
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->viewFramebuffer_int;
    [org_xmlvm_iphone_gl_GL glDeleteFramebuffersOES___int_int:_r2.i:_r0.i];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->viewFramebuffer_int = _r1.i;
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->viewRenderbuffer_int;
    [org_xmlvm_iphone_gl_GL glDeleteRenderbuffersOES___int_int:_r2.i:_r0.i];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->viewRenderbuffer_int = _r1.i;
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->depthRenderbuffer_int;
    if (_r0.i == 0) goto label27;
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->depthRenderbuffer_int;
    [org_xmlvm_iphone_gl_GL glDeleteRenderbuffersOES___int_int:_r2.i:_r0.i];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->depthRenderbuffer_int = _r1.i;
    label27:;
    [_pool release];
    return;
}


- (void) startAnimation__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    XMLVMElem _r4;
    XMLVMElem _r5;
    XMLVMElem _r6;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r6.o = self;
    _r0.o = [[[org_xmlvm_iphone_NSTimer alloc] init] autorelease];
    _r1.d = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r6.o)->animationInterval_double;
    _r1.f = (float) _r1.d;
    _r3.o = @"drawView";
    _r4.o = [NSNull null];
    _r5.i = 1;
    _r2 = _r6;
    [((org_xmlvm_iphone_NSTimer*) _r0.o) __init_org_xmlvm_iphone_NSTimer___float_java_lang_Object_java_lang_String_java_lang_Object_boolean:_r1.f:_r2.o:_r3.o:_r4.o:_r5.i];
    [_r0.o retain];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r6.o)->animationTimer_org_xmlvm_iphone_NSTimer release];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r6.o)->animationTimer_org_xmlvm_iphone_NSTimer = _r0.o;
    [_pool release];
    return;
}


- (void) stopAnimation__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r1.o = self;
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->animationTimer_org_xmlvm_iphone_NSTimer retain] autorelease];
    [((org_xmlvm_iphone_NSTimer*) _r0.o) invalidate__];
    _r0.o = [NSNull null];
    [_r0.o retain];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->animationTimer_org_xmlvm_iphone_NSTimer release];
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->animationTimer_org_xmlvm_iphone_NSTimer = _r0.o;
    [_pool release];
    return;
}


- (void) setAnimationInterval___double :(double)n1
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r1.o = self;
    _r2.d = n1;
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->animationInterval_double = _r2.d;
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->animationTimer_org_xmlvm_iphone_NSTimer retain] autorelease];
    if (_r0.o == [NSNull null]) goto label12;
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o) stopAnimation__];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o) startAnimation__];
    label12:;
    [_pool release];
    return;
}


- (void) setupView__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    XMLVMElem _r4;
    XMLVMElem _r5;
    XMLVMElem _r6;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r6.o = self;
    _r3.i = 0;
    _r5.f = 1.0;
    _r0.f = 0.0;
    _r1.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r6.o)->backingWidth_int;
    _r2.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r6.o)->backingHeight_int;
    [org_xmlvm_iphone_gl_GL glViewport___int_int_int_int:_r3.i:_r3.i:_r1.i:_r2.i];
    _r1.i = 5889;
    [org_xmlvm_iphone_gl_GL glMatrixMode___int:_r1.i];
    [org_xmlvm_iphone_gl_GL glLoadIdentity__];
    _r1.f = 320.0;
    _r2.f = 480.0;
    _r4.f = -1.0;
    _r3 = _r0;
    [org_xmlvm_iphone_gl_GL glOrthof___float_float_float_float_float_float:_r0.f:_r1.f:_r2.f:_r3.f:_r4.f:_r5.f];
    _r1.i = 5888;
    [org_xmlvm_iphone_gl_GL glMatrixMode___int:_r1.i];
    [org_xmlvm_iphone_gl_GL glClearColor___float_float_float_float:_r0.f:_r0.f:_r0.f:_r5.f];
    _r0.i = 1;
    _r1.i = 771;
    [org_xmlvm_iphone_gl_GL glBlendFunc___int_int:_r0.i:_r1.i];
    _r0.i = 3042;
    [org_xmlvm_iphone_gl_GL glEnable___int:_r0.i];
    _r0.i = 3553;
    [org_xmlvm_iphone_gl_GL glEnable___int:_r0.i];
    [_pool release];
    return;
}


- (void) drawView___org_xmlvm_iphone_NSTimer :(org_xmlvm_iphone_NSTimer*)n1
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    XMLVMElem _r2;
    XMLVMElem _r3;
    XMLVMElem _r4;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r3.o = self;
    _r4.o = n1;
    _r2.i = 36161;
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->context_org_xmlvm_iphone_gl_EAGLContext retain] autorelease];
    [org_xmlvm_iphone_gl_EAGLContext setCurrentContext___org_xmlvm_iphone_gl_EAGLContext:_r0.o];
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->isViewSetup_boolean;
    if (_r0.i == 0) goto label18;
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o) setupView__];
    _r0.i = 1;
    ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->isViewSetup_boolean = _r0.i;
    label18:;
    _r0.i = 36160;
    _r1.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->viewFramebuffer_int;
    [org_xmlvm_iphone_gl_GL glBindFramebufferOES___int_int:_r0.i:_r1.i];
    _r0.i = 16384;
    [org_xmlvm_iphone_gl_GL glClear___int:_r0.i];
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o) renderView__];
    _r0.i = ((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->viewRenderbuffer_int;
    [org_xmlvm_iphone_gl_GL glBindRenderbufferOES___int_int:_r2.i:_r0.i];
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r3.o)->context_org_xmlvm_iphone_gl_EAGLContext retain] autorelease];
    [((org_xmlvm_iphone_gl_EAGLContext*) _r0.o) presentRenderBuffer___int:_r2.i];
    [_pool release];
    return;
}


- (void) end__
{
    id        _res;
    id        _ex;
    XMLVMElem _r0;
    XMLVMElem _r1;
    NSAutoreleasePool* _pool = [[NSAutoreleasePool alloc] init];
    _r1.o = self;
    [((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o) stopAnimation__];
    _r0.o = [[((org_xmlvm_iphone_demo_gl_nehelesson4_GLView*) _r1.o)->context_org_xmlvm_iphone_gl_EAGLContext retain] autorelease];
    [((org_xmlvm_iphone_gl_EAGLContext*) _r0.o) release__];
    [_pool release];
    return;
}


- (void) renderView__
{
}


@end

